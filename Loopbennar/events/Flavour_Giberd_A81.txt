# Giberd MT events
# 1-9: old events
# 10-19: mission flavour events
# 20-29: electorate event chain
# 30-39: artificer faction events
# 50-60: cleanup events to end temporary effects
namespace = flavor_giberd
# Reworked Giberd MT events
#Our Options of War
country_event = {
	id = flavor_giberd.10
	title = flavor_giberd.10.t
	desc = flavor_giberd.10.d
	picture = HRE_eventPicture
	is_triggered_only = yes
	fire_only_once = yes
	immediate = {
		hidden_effect = {
			#Artificery Local Setup
			# done manually here because the loc/choice in the usual setup event doesn't fit
			set_country_flag = artificery_unlocked
			artifice_inventions_give_basket = yes
			update_artifice_points = yes
			clear_artificers_organization_effect = yes
			bennonhill_area = {
				add_permanent_claim = ROOT
			}
			hearthswood_area = {
				add_permanent_claim = ROOT
			}
			set_country_flag = artifice_limited_to_tier_1
		}
	}
	option = {
		name = flavor_giberd.10.a
		goto = 273		#Tendergrove
		add_country_modifier = {
			name = giberd_options_war_leslinpar
			duration = 3560
		}
		add_treasury = -50
		random_owned_province = {
			limit = {
				infantry_in_province = 2
				infantry_in_province = ROOT
			}
			kill_units = {
				who = owner
				type = infantry
				amount = 2
			}
			rajput_infantry = ROOT
			rajput_infantry = ROOT
		}
		custom_tooltip = giberd_unable_to_research_10
		hidden_effect = {
			add_country_modifier = {
				name = artifice_research_temporarily_disabled
				duration = 3650
			}
		}
		tooltip = {
			bennonhill_area = {
				add_permanent_claim = ROOT
			}
			hearthswood_area = {
				add_permanent_claim = ROOT
			}
		}
		custom_tooltip = giberd_magisterium_oversight_tt
		custom_tooltip = has_already_happened_tt
		set_estate_privilege = estate_artificers_organization_giberd_magisterium_oversight
	}
	option = {
		name = flavor_giberd.10.b
		goto = 268		#Bennon
		custom_tooltip = giberd_bennon_forts_explode_tt
		set_country_flag = giberd_bennon_forts_explode
		tooltip = {
			268 = {
				add_province_modifier = {
					name = giberd_options_war_bennon
					duration = 1825
				}
			}
		}
		add_treasury = -50
		random_owned_province = {
			limit = {
				infantry_in_province = 2
				infantry_in_province = ROOT
			}
			kill_units = {
				who = owner
				type = infantry
				amount = 2
			}
			rajput_infantry = ROOT
			rajput_infantry = ROOT
		}
		custom_tooltip = giberd_unable_to_research_10
		hidden_effect = {
			add_country_modifier = {
				name = artifice_research_temporarily_disabled
				duration = 3650
			}
		}
		tooltip = {
			bennonhill_area = {
				add_permanent_claim = ROOT
			}
			hearthswood_area = {
				add_permanent_claim = ROOT
			}
		}
		custom_tooltip = giberd_magisterium_oversight_tt
		custom_tooltip = has_already_happened_tt
		set_estate_privilege = estate_artificers_organization_giberd_magisterium_oversight
	}
	option = {
		name = flavor_giberd.10.c
		add_prestige = 20
		add_country_modifier = {
			name = giberd_options_war_peace
			duration = 3650
		}
		tooltip = {
			bennonhill_area = {
				add_permanent_claim = ROOT
			}
			hearthswood_area = {
				add_permanent_claim = ROOT
			}
		}
		custom_tooltip = giberd_magisterium_oversight_tt
		custom_tooltip = has_already_happened_tt
		set_estate_privilege = estate_artificers_organization_giberd_magisterium_oversight
	}
	after = {
		research_speed = yes
	}
}

#Silver Linings are Laced in Gold
country_event = {
	id = flavor_giberd.11
	title = flavor_giberd.11.t
	desc = flavor_giberd.11.d
	picture = HRE_eventPicture
	is_triggered_only = yes
	option = {
		name = flavor_giberd.11.a
		add_favors = {
			who = A73
			amount = 20
		}
		if = {
			limit = {
				has_dlc = "The Cossacks"
			}
			add_country_modifier = {
				name = giberd_silverforge_favour_accepted
				duration = 3650
			}
		}
		else = {
			random_owned_province = {
				limit = {
					infantry_in_province = 2
					infantry_in_province = ROOT
				}
				kill_units = {
					who = owner
					type = infantry
					amount = 2
				}
				rajput_infantry = ROOT
				rajput_infantry = ROOT
			}
		}
	}
	option = {
		name = flavor_giberd.11.b
		add_country_modifier = {
			name = giberd_silverforge_favour_rejected
			duration = 5475
		}
	}
}

# Esmaraine challenges our Bid
country_event = {
	id = flavor_giberd.12
	title = flavor_giberd.12.t
	desc = flavor_giberd.12.d
	picture = HRE_eventPicture
	is_triggered_only = yes
	option = {
		name = flavor_giberd.12.a
		add_prestige = -20
		add_historical_rival = A44
		A44 = {
			add_historical_rival = ROOT
		}
	}
}

# Convincing the emperor
country_event = {
	id = flavor_giberd.14
	title = flavor_giberd.14.t
	desc = flavor_giberd.14.d
	picture = HRE_eventPicture
	is_triggered_only = yes
	option = {
		name = flavor_giberd.14.a
		custom_tooltip = artificer_points_upkeep_tt
		add_or_extend_country_modifier = {
			name = artificers_busy_40
			duration = 3650
		}
		update_artifice_points = yes
		hidden_effect = {
			emperor = {
				country_event = {
					id = flavor_giberd.16
					days = 1
				}
			}
		}
	}
}

# The first Gnomish elector
country_event = {
	id = flavor_giberd.15
	title = flavor_giberd.15.t
	desc = flavor_giberd.15.d
	picture = HRE_eventPicture
	is_triggered_only = yes
	option = {
		name = flavor_giberd.15.a
		elector = yes
		country_event = {
			id = flavor_esmari.1
			days = 1
		}
		custom_tooltip = giberd_change_artifice_limit_tt
		custom_tooltip = artifice_limited_to_tier_2_tt
		clr_country_flag = artifice_limited_to_tier_1
		set_country_flag = artifice_limited_to_tier_2
		artifice_tiering_update = yes
	}
}

# Giberd asks for an Electorate
country_event = {
	id = flavor_giberd.16
	title = flavor_giberd.16.t
	desc = flavor_giberd.16.d
	picture = HRE_eventPicture
	is_triggered_only = yes
	option = {
		name = flavor_giberd.16.a
		ai_chance = {
			factor = 100
		}
		A81 = {
			country_event = {
				id = flavor_giberd.15
				days = 30
			}
			hidden_effect = {
				country_event = {
					id = flavor_giberd.17
					days = 3650
				}
			}
		}
		if = {
			limit = {
				emperor = {
					ai = no
				}
			}
			country_event = {
				id = flavor_giberd.17
				days = 3650
			}
		}
	}
	option = {
		name = flavor_giberd.16.b
		ai_chance = {
			factor = 0
		}
		A81 = {
			remove_country_modifier = artificers_busy_40
		}
	}
}

# The Mechanical Dragon
country_event = {
	id = flavor_giberd.17
	title = flavor_giberd.17.t
	desc = flavor_giberd.17.d
	picture = HRE_eventPicture
	is_triggered_only = yes
	option = {
		name = flavor_giberd.17.a
		emperor = {
			add_country_modifier = {
				name = giberd_mechanical_dragon
				duration = 3650
			}
		}
	}
}

# The Demands of the enclaves & Esmari
country_event = {
	id = flavor_giberd.18
	title = flavor_giberd.18.t
	desc = flavor_giberd.18.d
	picture = HRE_eventPicture
	is_triggered_only = yes
	option = {
		name = flavor_giberd.18.a
		every_owned_province = {
			limit = {
				region = esmaria_region
			}
			add_province_modifier = {
				name = giberd_demands_enclaves_promises_made
				duration = 1825
			}
		}
	}
}

# The shackles of the Magisterium
country_event = {
	id = flavor_giberd.19
	title = flavor_giberd.19.t
	desc = flavor_giberd.19.d
	picture = HRE_eventPicture
	is_triggered_only = yes
	option = {
		name = flavor_giberd.19.a
		remove_government_reform = imperial_technocracy_republic_reform
		add_government_reform = technocracy_republic_reform
		remove_estate_privilege = estate_artificers_organization_giberd_magisterium_oversight
		set_estate_privilege = estate_artificers_organization_giberd_ravelian_guilds
	}
	option = {
		name = flavor_giberd.19.b
		remove_estate_privilege = estate_artificers_organization_giberd_magisterium_oversight
		set_estate_privilege = estate_artificers_organization_giberd_beacon_of_harmony
		set_estate_privilege = estate_mages_organization_giberd_beacon_of_harmony
	}
}

########
# electorate event chain
# Starting with Silverforge
country_event = {
	id = flavor_giberd.20
	title = flavor_giberd.20.t
	desc = flavor_giberd.20.d
	picture = HRE_eventPicture
	is_triggered_only = yes
	option = {
		name = flavor_giberd.20.a
		add_country_modifier = {
			name = giberd_silverforge_relations_good
			duration = 3650			#20 years
		}
		A73 = {
			add_opinion = {
				who = ROOT
				modifier = giberd_potions_bribe
				years = 10
			}
		}
		if = {
			limit = {
				exists = A25
			}
			country_event = {
				id = flavor_giberd.21				#damescrown
				days = 60
			}
		}
		if = {
			limit = {
				exists = A12
			}
			country_event = {
				id = flavor_giberd.22				#BEEPECK
				days = 120
			}
		}
		if = {
			limit = {
				exists = A11
			}
			country_event = {
				id = flavor_giberd.23				#pearsledge
				days = 180
			}
		}
		if = {
			limit = {
				exists = A31
			}
			country_event = {
				id = flavor_giberd.24				#Moonhaven
				days = 240
			}
		}
		if = {
			limit = {
				exists = A45
			}
			country_event = {
				id = flavor_giberd.25				#Istralore
				days = 300
			}
		}
		if = {
			limit = {
				exists = A85
			}
			country_event = {
				id = flavor_giberd.26				#Magisterium
				days = 360
			}
		}
	}
	option = {
		name = flavor_giberd.20.b
		if = {
			limit = {
				exists = A25
			}
			country_event = {
				id = flavor_giberd.21				#damescrown
				days = 60
			}
		}
		if = {
			limit = {
				exists = A12
			}
			country_event = {
				id = flavor_giberd.22				#BEEPECK
				days = 120
			}
		}
		if = {
			limit = {
				exists = A11
			}
			country_event = {
				id = flavor_giberd.23				#pearsledge
				days = 180
			}
		}
		if = {
			limit = {
				exists = A31
			}
			country_event = {
				id = flavor_giberd.24				#Moonhaven
				days = 240
			}
		}
		if = {
			limit = {
				exists = A45
			}
			country_event = {
				id = flavor_giberd.25				#Istralore
				days = 300
			}
		}
		if = {
			limit = {
				exists = A85
			}
			country_event = {
				id = flavor_giberd.26				#Magisterium
				days = 360
			}
		}
	}
}

# Down stream and up to Damescrown
country_event = {
	id = flavor_giberd.21
	title = flavor_giberd.21.t	##damescrown
	desc = flavor_giberd.21.d
	picture = HRE_eventPicture
	is_triggered_only = yes
	trigger = {
		exists = A25
	}
	option = {
		name = flavor_giberd.21.a
		home_trade_node_effect_scope = {
			add_trade_modifier = {
				who = A25
				duration = 3650
				power = 100
				key = giberd_damescrown_contracts
			}
		}
		A25 = {
			add_opinion = {
				who = ROOT
				modifier = giberd_potions_bribe
				years = 10
				multiplier = 2
			}
		}
	}
	option = {
		name = flavor_giberd.21.b
	}
}

country_event = {
	id = flavor_giberd.22	##beepeck
	title = flavor_giberd.22.t
	desc = flavor_giberd.22.d
	picture = HRE_eventPicture
	is_triggered_only = yes
	trigger = {
		exists = A12
	}
	option = {
		name = flavor_giberd.22.a
		A12 = {
			add_prestige = 50
			add_country_modifier = {
				name = giberd_beepeck_honored_by_giberd
				duration = 3650
			}
			add_opinion = {
				who = ROOT
				modifier = giberd_potions_bribe
				years = 10
				multiplier = 2
			}
		}
		add_country_modifier = {
			name = giberd_beepeck_pawns
			duration = 3650
		}
		add_prestige = -50
	}
	option = {
		name = flavor_giberd.22.b
	}
}

country_event = {
	id = flavor_giberd.23	##Pearsledge
	title = flavor_giberd.23.t
	desc = flavor_giberd.23.d
	picture = HRE_eventPicture
	is_triggered_only = yes
	trigger = {
		exists = A11
	}
	option = {
		name = flavor_giberd.23.a
		add_treasury = -1000
		add_country_modifier = {
			name = giberd_we_bought_bad_wine
			duration = 7300
		}
		A11 = {
			add_country_modifier = {
				name = giberd_bought_bad_wine
				duration = 7300
			}
			add_opinion = {
				who = ROOT
				modifier = giberd_potions_bribe
				years = 10
				multiplier = 2
			}
			add_treasury = 1000
		}
	}
	option = {
		name = flavor_giberd.23.b
	}
}

country_event = {
	id = flavor_giberd.24	##Moonhaven
	title = flavor_giberd.24.t
	desc = flavor_giberd.24.d
	picture = HRE_eventPicture
	is_triggered_only = yes
	trigger = {
		exists = A31
	}
	option = {
		name = flavor_giberd.24.a
		A31 = {
			add_country_modifier = {
				name = artificers_good_moonhaven
				duration = 7300
			}
			add_opinion = {
				who = ROOT
				modifier = giberd_potions_bribe
				multiplier = 2
			}
		}
		add_country_modifier = {
			name = artificers_aelantir
			duration = 7300
		}
	}
	option = {
		name = flavor_giberd.24.b
	}
}

country_event = {
	id = flavor_giberd.25	##Istralore
	title = flavor_giberd.25.t
	desc = flavor_giberd.25.d
	picture = HRE_eventPicture
	is_triggered_only = yes
	trigger = {
		exists = A45
	}
	option = {
		name = flavor_giberd.25.a
		A45 = {
			add_country_modifier = {
				name = giberd_helped_istralroe
				duration = 7300
			}
			add_opinion = {
				who = ROOT
				modifier = giberd_potions_bribe
				years = 2
				multiplier = 2
			}
		}
		add_country_modifier = {
			name = giberd_harmed_helping
			duration = 7300
		}
	}
	option = {
		name = flavor_giberd.25.b
	}
}

country_event = {
	id = flavor_giberd.26	##Masterium
	title = flavor_giberd.26.t
	desc = flavor_giberd.26.d
	picture = HRE_eventPicture
	is_triggered_only = yes
	trigger = {
		exists = A45
	}
	option = {
		name = flavor_giberd.26.a
		A85 = {
			add_opinion = {
				who = ROOT
				modifier = giberd_potions_bribe
				years = 10
				multiplier = 2
			}
		}
		add_country_modifier = {
			name = giberd_magisterial_oversight
			duration = 7300
		}
	}
	option = {
		name = flavor_giberd.26.b
	}
}

# What is in a name?
country_event = {
	id = flavor_giberd.29
	title = flavor_giberd.29.t
	desc = flavor_giberd.29.d
	picture = HRE_eventPicture
	is_triggered_only = yes
	option = {
		name = flavor_giberd.29.a
		add_country_modifier = {
			name = giberd_nation_esmaria_built
			duration = -1
		}
		change_tag = Z46
		set_country_flag = formed_esmaria_flag
		# override_country_name = ESMARIA
	}
	option = {
		name = flavor_giberd.29.b
		add_country_modifier = {
			name = giberd_nation_esmaria_built
			duration = -1
		}
		override_country_name = IMPERIAL_HIERARCHY
	}
	option = {
		name = flavor_giberd.29.c
		add_country_modifier = {
			name = giberd_nation_esmaria_built
			duration = -1
		}
		override_country_name = CAIGHSODDA_HIERARCHY
	}
	option = {
		name = flavor_giberd.29.d
		add_country_modifier = {
			name = giberd_nation_esmaria_built
			duration = -1
		}
		override_country_name = GIBERDI_HIERARCHY
	}
}

########
# artificer faction events
# The Imperial Archive
country_event = {
	id = flavor_giberd.30
	title = flavor_giberd.30.t
	desc = flavor_giberd.30.d
	picture = HRE_eventPicture
	is_triggered_only = yes
	after = {
		hidden_effect = {
			set_country_flag = giberd_faction_competition_enabled
			country_event = {
				id = flavor_giberd.58
				days = 3650
			}
		}
	}
	option = {
		name = flavor_giberd.30.a
		custom_tooltip = giberd_factions_explain_tt
		giberd_factions_technomancers_increase = yes
		add_treasury = -500
		every_elector = {
			add_opinion = {
				who = ROOT
				modifier = giberd_is_restoring_archive
				years = 10
			}
		}
		275 = {
			add_province_modifier = {
				name = giberd_restoring_archive
				duration = -1
			}
		}
		custom_tooltip = giberd_after_10_years_tt
		tooltip = {
			275 = {
				add_province_modifier = {
					name = giberd_restored_archive
					duration = -1
				}
			}
		}
	}
	option = {
		name = flavor_giberd.30.b
		custom_tooltip = giberd_factions_explain_tt
		giberd_factions_brillites_increase = yes
		add_treasury = -300
		add_adm_power = -75
		add_dip_power = -75
		add_mil_power = -75
		add_or_extend_country_modifier = {
			name = artificers_busy_20
			duration = 3650
		}
		275 = {
			add_province_modifier = {
				name = giberd_scouring_archive
				duration = -1
			}
		}
		custom_tooltip = giberd_after_10_years_tt
		tooltip = {
			275 = {
				add_province_modifier = {
					name = giberd_scoured_archive
					duration = -1
				}
			}
		}
	}
	option = {
		name = flavor_giberd.30.c
		custom_tooltip = giberd_factions_explain_tt
		giberd_factions_mechanists_increase = yes
		add_treasury = -1000
		add_adm_power = -150
		add_dip_power = -150
		add_mil_power = -150
		add_or_extend_country_modifier = {
			name = artificers_busy_40
			duration = 3650
		}
		every_elector = {
			add_opinion = {
				who = ROOT
				modifier = giberd_is_stealing_archive
				years = 10
			}
		}
		emperor = {
			add_opinion = {
				who = ROOT
				modifier = giberd_is_stealing_archive
				years = 10
			}
		}
		275 = {
			add_province_modifier = {
				name = giberd_stealing_archive
				duration = -1
			}
		}
		custom_tooltip = giberd_after_10_years_tt
		tooltip = {
			275 = {
				add_province_modifier = {
					name = giberd_stolen_archive
					duration = -1
				}
			}
		}
	}
}

# Addressing the Damestear demand
country_event = {
	id = flavor_giberd.31
	title = flavor_giberd.31.t
	desc = flavor_giberd.31.d
	picture = HRE_eventPicture
	is_triggered_only = yes
	option = {
		# technomancers
		name = flavor_giberd.31.a
		goto = 265
		giberd_factions_technomancers_increase = yes
		265 = {
			change_trade_goods = damestear
			set_province_flag = permanent_damestear
			add_province_modifier = {
				name = giberd_damestear_port_high
				duration = -1
			}
		}
		custom_tooltip = orlghelovar_damestear_tt
		add_treasury = -2000
		add_country_modifier = {
			name = giberd_paying_the_moonisle
			duration = -1
		}
		custom_tooltip = giberds_bonus_disappear_tt
	}
	option = {
		# brillites
		name = flavor_giberd.31.b
		goto = 265
		custom_tooltip = flavor_giberd.31.b_tt
		giberd_factions_brillites_increase = yes
		country_event = {
			id = flavor_giberd.32
			days = 1
		}
		tooltip = {
			add_treasury = -500
		}
	}
	option = {
		# mechanists
		name = flavor_giberd.31.c
		goto = 9
		giberd_factions_mechanists_increase = yes
		9 = {
			add_permanent_claim = ROOT
		}
	}
}

# Short term low amount renewable deal for Damestear
country_event = {
	id = flavor_giberd.32
	title = flavor_giberd.32.t
	desc = flavor_giberd.32.d
	picture = HRE_eventPicture
	is_triggered_only = yes
	option = {
		# yes
		name = flavor_giberd.32.a
		custom_tooltip = flavor_giberd.32.accept_tt
		add_treasury = -500
		if = {
			limit = {
				265 = {
					NOT = {
						has_province_modifier = giberd_damestear_port_low
					}
				}
			}
			hidden_effect = {
				265 = {
					add_province_modifier = {
						name = giberd_damestear_port_low
						duration = -1
					}
				}
			}
			mission_reward_artifice_points_3 = yes
		}
	}
	option = {
		# no
		name = flavor_giberd.32.b
		custom_tooltip = flavor_giberd.32.reject_tt
		if = {
			limit = {
				265 = {
					has_province_modifier = giberd_damestear_port_low
				}
			}
			remove_province_modifier = giberd_damestear_port_low
			hidden_effect = {
				hidden_effect = {
					change_variable = {
						which = StaticArtificePoints
						value = -3
					}
				}
				update_artifice_points = yes
			}
		}
	}
	after = {
		country_event = {
			id = flavor_giberd.32
			days = 3650
		}
	}
}

# Esmaria's last port of call
country_event = {
	id = flavor_giberd.33
	title = flavor_giberd.33.t
	desc = flavor_giberd.33.d
	picture = HRE_eventPicture
	is_triggered_only = yes
	option = {
		name = flavor_giberd.33.a
		giberd_factions_technomancers_increase = yes
		add_country_modifier = {
			name = giberd_estallen_share
			duration = -1
		}
		901 = {
			add_trade_modifier = {
				who = ROOT
				duration = -1
				power = 100
				key = giberd_estallen_trade_deal
			}
			add_trade_modifier = {
				who = A93
				duration = -1
				power = -100
				key = giberd_estallen_trade_deal
			}
			every_trade_node_member_province = {
				limit = {
					owned_by = A93
				}
				add_province_modifier = {
					name = giberd_business_ventures
					duration = -1
				}
			}
		}
		custom_tooltip = giberds_bonus_disappear_tt
		if = {
			limit = {
				AND = {
					280 = {
						owned_by = ROOT
					}
					576 = {
						owned_by = ROOT
					}
				}
			}
			custom_tooltip = giberd_pinklady_conquered_tt
			giberd_factions_mechanists_increase = yes
		}
	}
	option = {
		name = flavor_giberd.33.b
		giberd_factions_brillites_increase = yes
		add_manpower = -20
		280 = {
			add_permanent_province_modifier = {
				name = giberd_lock_out_estallen
				duration = -1
			}
			owner = {
				add_country_modifier = {
					name = giberd_estallen_embargo
					duration = 9125
				}
			}
		}
		if = {
			limit = {
				AND = {
					280 = {
						owned_by = ROOT
					}
					576 = {
						owned_by = ROOT
					}
				}
			}
			custom_tooltip = giberd_pinklady_conquered_tt
			giberd_factions_mechanists_increase = yes
		}
	}
	option = {
		name = flavor_giberd.33.c
		giberd_factions_mechanists_increase = yes
		280 = {
			add_permanent_province_modifier = {
				name = giberd_pinklady_tradepost
				duration = -1
			}
		}
		if = {
			limit = {
				AND = {
					280 = {
						owned_by = ROOT
					}
					576 = {
						owned_by = ROOT
					}
				}
			}
			custom_tooltip = giberd_pinklady_conquered_tt
			giberd_factions_mechanists_increase = yes
		}
		else = {
			280 = {
				add_permanent_claim = ROOT
			}
			576 = {
				add_permanent_claim = ROOT
			}
		}
	}
}

# Silverforge's due
country_event = {
	id = flavor_giberd.34
	title = flavor_giberd.34.t
	desc = flavor_giberd.34.d
	picture = HRE_eventPicture
	is_triggered_only = yes
	option = {
		name = flavor_giberd.34.a
		giberd_factions_technomancers_increase = yes
		set_country_flag = giberd_silverforge_hold_large
		custom_tooltip = artificer_points_upkeep_tt
		add_or_extend_country_modifier = {
			name = artificers_busy_60
			duration = 3650
		}
		update_artifice_points = yes
		add_country_modifier = {
			name = giberd_paying_for_silverforge
			duration = 3650
		}
		912 = {
			add_province_modifier = {
				name = giberd_silverforge_hold
				duration = -1
			}
		}
		custom_tooltip = giberd_silverforge_war_tt
		large_increase_of_dwarven_tolerance_effect = yes
		for = {
			custom_tooltip = giberd_10_provinces_get_dwarves_tt
			amount = 10
			effect = "random_owned_province = { limit = { region = esmaria_region } add_dwarven_minority_size_effect = yes }"
		}
	}
	option = {
		name = flavor_giberd.34.b
		giberd_factions_brillites_increase = yes
		set_country_flag = giberd_silverforge_hold_small
		custom_tooltip = artificer_points_upkeep_tt
		add_or_extend_country_modifier = {
			name = artificers_busy_20
			duration = 3650
		}
		update_artifice_points = yes
		for = {
			custom_tooltip = giberd_2_provinces_get_dwarves_tt
			amount = 2
			effect = "random_owned_province = { limit = { region = esmaria_region } add_dwarven_minority_size_effect = yes }"
		}
	}
	option = {
		name = flavor_giberd.34.c
		giberd_factions_mechanists_increase = yes
		remove_historical_friend = A73
		A73 = {
			add_casus_belli = {
				type = cb_insult
				target = ROOT
				months = 120
			}
		}
		308 = {
			add_permanent_claim = ROOT
		}
		912 = {
			add_permanent_claim = ROOT
		}
	}
}

# Damescrown's due
country_event = {
	id = flavor_giberd.36
	title = flavor_giberd.36.t
	desc = flavor_giberd.36.d
	picture = HRE_eventPicture
	is_triggered_only = yes
	immediate = {
		234 = {
			owner = {
				save_event_target_as = damescrown_owner
			}
		}
	}
	option = {
		name = flavor_giberd.36.a
		giberd_factions_technomancers_increase = yes
		custom_tooltip = artificer_points_upkeep_tt
		set_country_flag = giberd_damescrown_due_large
		add_or_extend_country_modifier = {
			name = artificers_busy_20
			duration = 3650
		}
		update_artifice_points = yes
		234 = {
			add_province_modifier = {
				name = giberd_damescrown_wind_tower
				duration = -1
			}
			owner = {
				add_opinion = {
					who = ROOT
					modifier = giberd_wind_tower_opinion_up
					years = 20
				}
			}
		}
		add_country_modifier = {
			name = giberd_damescrown_trade
		}
		custom_tooltip = giberds_bonus_disappear_tt
	}
	option = {
		name = flavor_giberd.36.b
		giberd_factions_brillites_increase = yes
		custom_tooltip = artificer_points_upkeep_tt
		set_country_flag = giberd_damescrown_due_small
		add_or_extend_country_modifier = {
			name = artificers_busy_10
			duration = 1825
		}
		update_artifice_points = yes
		234 = {
			owner = {
				add_opinion = {
					who = ROOT
					modifier = giberd_wind_tower_opinion_down
					years = 20
				}
			}
		}
		home_trade_node_effect_scope = {
			add_trade_modifier = {
				who = event_target:damescrown_owner
				duration = -1
				power = -60
				key = giberd_damescrown_diverted_trade
			}
		}
	}
	option = {
		name = flavor_giberd.36.c
		giberd_factions_mechanists_increase = yes
		262 = {
			add_permanent_claim = ROOT
		}
		908 = {
			add_permanent_claim = ROOT
		}
		234 = {
			add_permanent_claim = ROOT
		}
		declare_war_with_cb = {
			who = event_target:damescrown_owner
			casus_belli = cb_conquest
			war_goal_province = 234
		}
		if = {
			limit = {
				any_known_country = {
					is_in_trade_league_with = event_target:damescrown_owner
				}
			}
			every_known_country = {
				limit = {
					OR = {
						tag = event_target:damescrown_owner
						is_in_trade_league_with = event_target:damescrown_owner
					}
				}
				add_opinion = {
					who = ROOT
					modifier = giberd_wind_tower_opinion_down
					multiplier = 2
					years = 20
				}
			}
		}
	}
	after = {
		hidden_effect = {
			country_event = {
				id = flavor_giberd.57
				days = 3650
			}
		}
	}
}

# Arcane Arts and Artificery
country_event = {
	id = flavor_giberd.38
	title = flavor_giberd.38.t
	desc = flavor_giberd.38.d
	picture = HRE_eventPicture
	is_triggered_only = yes
	immediate = {
		set_country_flag = giberd_arcane_arts
	}
	option = {
		name = flavor_giberd.38.a
		giberd_factions_technomancers_increase = yes
		custom_tooltip = giberd_unable_to_research_20
		hidden_effect = {
			add_country_modifier = {
				name = artifice_research_temporarily_disabled
				duration = 7300
			}
		}
		add_estate_loyalty_modifier = {
			estate = estate_artificers
			desc = giberd_the_guilds_betrayed_tt
			loyalty = -20
			duration = 7300
		}
		add_estate_influence_modifier = {
			estate = estate_artificers
			desc = giberd_the_guilds_betrayed_influence_tt
			influence = -20
			duration = 7300
		}
		add_estate_influence_modifier = {
			estate = estate_mages
			desc = giberd_abundance_of_mages_tt
			influence = 20
			duration = 7300
		}
		custom_tooltip = linebreak_tt
		custom_tooltip = has_already_happened_tt
		custom_tooltip = giberd_magisterium_oversight_buffed_tt
	}
	option = {
		name = flavor_giberd.38.b
		giberd_factions_brillites_increase = yes
		add_country_modifier = {
			name = giberd_fed_misinformation
			duration = 7300
		}
		add_estate_influence_modifier = {
			estate = estate_mages
			desc = giberd_fed_misinformation_influence_tt
			influence = -10
			duration = 3650
		}
		add_country_modifier = {
			name = giberd_magisterium_merchants
			duration = 7300
		}
		custom_tooltip = linebreak_tt
		custom_tooltip = has_already_happened_tt
		custom_tooltip = giberd_magisterium_oversight_buffed_tt
	}
	option = {
		name = flavor_giberd.38.c
		giberd_factions_mechanists_increase = yes
		add_country_modifier = {
			name = giberd_sticking_it_to_the_mages
			duration = 7300
		}
		if = {
			limit = {
				exists = A85
			}
			add_casus_belli = {
				type = cb_insult
				target = A85
				months = 60
			}
			declare_war_with_cb = {
				who = A85
				casus_belli = cb_insult
			}
		}
		add_estate_loyalty_modifier = {
			estate = estate_mages
			desc = giberd_sticking_it_to_the_mages_tt
			loyalty = -30
			duration = 7300
		}
		add_estate_loyalty_modifier = {
			estate = estate_artificers
			desc = giberd_sticking_it_to_the_mages_tt
			loyalty = 20
			duration = 7300
		}
		add_estate_influence_modifier = {
			estate = estate_artificers
			desc = giberd_sticking_it_to_the_mages_influence_tt
			influence = 20
			duration = 7300
		}
		custom_tooltip = linebreak_tt
		custom_tooltip = has_already_happened_tt
		custom_tooltip = giberd_magisterium_oversight_buffed_tt
	}
}

# What to do about the Ravelians
country_event = {
	id = flavor_giberd.39
	title = flavor_giberd.39.t
	desc = flavor_giberd.39.d
	picture = HRE_eventPicture
	is_triggered_only = yes
	immediate = {
		set_country_flag = giberd_ravelians_role
	}
	option = {
		name = flavor_giberd.39.a
		giberd_factions_technomancers_increase = yes
		custom_tooltip = flavor_giberd.39_tt
		giberd_leader_technomancers_bonus = yes
		custom_tooltip = has_already_happened_tt
		custom_tooltip = giberd_magisterium_oversight_buffed_tt
	}
	option = {
		name = flavor_giberd.39.b
		giberd_factions_brillites_increase = yes
		custom_tooltip = flavor_giberd.39_tt
		giberd_leader_brillites_bonus = yes
		custom_tooltip = has_already_happened_tt
		custom_tooltip = giberd_magisterium_oversight_buffed_tt
	}
	option = {
		name = flavor_giberd.39.c
		giberd_factions_mechanists_increase = yes
		custom_tooltip = flavor_giberd.39_tt
		giberd_leader_mechanists_bonus = yes
		custom_tooltip = has_already_happened_tt
		custom_tooltip = giberd_magisterium_oversight_buffed_tt
	}
}

# Artificer Faire
country_event = {
	id = flavor_giberd.41
	title = flavor_giberd.41.t
	desc = flavor_giberd.41.d
	picture = HRE_eventPicture
	is_triggered_only = yes
	option = {
		name = flavor_giberd.41.a
		custom_tooltip = flavor_giberd.41_tt
		hidden_effect = {
			if = {
				limit = {
					check_variable = {
						which = giberd_factions_technomancers_influence
						which = giberd_factions_brillites_influence
					}
					check_variable = {
						which = giberd_factions_technomancers_influence
						which = giberd_factions_mechanists_influence
					}
				}
				country_event = {
					id = flavor_giberd.42					# technomancers
					days = 180
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = giberd_factions_brillites_influence
						which = giberd_factions_mechanists_influence
					}
				}
				country_event = {
					id = flavor_giberd.43					# brillites
					days = 180
				}
			}
			else = {
				country_event = {
					id = flavor_giberd.44					# mechanists
					days = 180
				}
			}
		}
	}
}

# Technomancers win: Giberd: A Nation Favoured
country_event = {
	id = flavor_giberd.42
	title = flavor_giberd.42.t
	desc = flavor_giberd.42.d
	picture = HRE_eventPicture
	is_triggered_only = yes
	option = {
		name = flavor_giberd.42.a
		add_estate_loyalty_modifier = {
			estate = estate_artificers
			desc = giberd_nation_favoured_tt
			loyalty = 10
			duration = -1
		}
		add_country_modifier = {
			name = giberd_deluge_of_investment
			duration = -1
		}
	}
}

# Brillites win: Giberd: A Nation Financed
country_event = {
	id = flavor_giberd.43
	title = flavor_giberd.43.t
	desc = flavor_giberd.43.d
	picture = HRE_eventPicture
	is_triggered_only = yes
	option = {
		name = flavor_giberd.43.a
		add_country_modifier = {
			name = giberd_language_of_esmar
			duration = -1
		}
	}
}

# Mechanists win: Giberd: A Nation Friendless
country_event = {
	id = flavor_giberd.44
	title = flavor_giberd.44.t
	desc = flavor_giberd.44.d
	picture = HRE_eventPicture
	is_triggered_only = yes
	option = {
		name = flavor_giberd.44.a
		add_country_modifier = {
			name = giberd_show_our_might
			duration = -1
		}
	}
}

##########
# Cleanup events
# finishing the gds loopeng gedsandde
country_event = {
	id = flavor_giberd.57
	title = flavor_giberd.57.t
	desc = flavor_giberd.57.d
	picture = HRE_eventPicture
	is_triggered_only = yes
	hidden = yes
	option = {
		name = flavor_giberd.57.a
		add_country_modifier = {
			name = giberd_gds_loopeng_gedsandde
			duration = -1
		}
	}
}

# cleanup for .30
country_event = {
	id = flavor_giberd.58
	title = flavor_giberd.58.t
	desc = flavor_giberd.58.d
	picture = HRE_eventPicture
	is_triggered_only = yes
	hidden = yes
	option = {
		name = flavor_giberd.58.a
		if = {
			limit = {
				275 = {
					has_province_modifier = giberd_restoring_archive
				}
			}
			275 = {
				remove_province_modifier = giberd_restoring_archive
				add_permanent_province_modifier = {
					name = giberd_restored_archive
					duration = -1
				}
			}
		}
		if = {
			limit = {
				275 = {
					has_province_modifier = giberd_scouring_archive
				}
			}
			275 = {
				remove_province_modifier = giberd_scouring_archive
				add_permanent_province_modifier = {
					name = giberd_scoured_archive
					duration = -1
				}
			}
		}
		if = {
			limit = {
				275 = {
					has_province_modifier = giberd_stealing_archive
				}
			}
			275 = {
				remove_province_modifier = giberd_stealing_archive
				add_permanent_province_modifier = {
					name = giberd_stolen_archive
					duration = -1
				}
			}
		}
	}
}

# followup for giberd_a_technocratic_administration
country_event = {
	id = flavor_giberd.59
	title = flavor_giberd.59.t
	desc = flavor_giberd.59.d
	picture = HRE_eventPicture
	is_triggered_only = yes
	hidden = yes
	option = {
		name = flavor_giberd.59.a
		271 = {
			add_permanent_province_modifier = {
				name = giberd_ace
				duration = -1
			}
		}
	}
}
